//mega menu position
!function(e){"use strict";jQuery.fn.megamenu=function(e){function a(){if(i.find(".megamenu").each(function(){var a,n=jQuery,t=jQuery(this),i=o.width(),s=t.offset().left,l=t.width(),r=t.find("> .dropdown > li").length,d=.7*n("header").width(),p=1,h=0,u=1281>=i?200:230;t.find("> .dropdown > li.has-dropdown > .dropdown").each(function(){var e=jQuery(this).find("> li").length;e>p&&(p=e,h=jQuery(this).parent("li").height())}),t.find("> .dropdown > li.has-dropdown > .dropdown").each(function(){var e=jQuery(this),a=e.find("> li").length;if(p>a)for(var n=1;p-a>=n;n++)e.append('<li class="empty-megamenu"><a>&nbsp</a></li>')}),e=n("header .side").length?i-n("header .side").width():i,r=r*u>e&&r>4?4:r;var a=r*u>e?d+30:r*u+30,g=(i-a)/2,c=a/2-l/2;c=a/2>s+l/2-g?e-(s+l):c;var m=i-s-l-g;(i>1300||c>m)&&(c=m),t.find("> .dropdown > li").css("width",u+"px"),t.find("> .dropdown").css({width:a+"px"})}),i.parents(".side").length)var a=i.find("li.megamenu > .dropdown");else var a=i.find("li:not(.megamenu).has-dropdown > .dropdown");a.each(function(){var e=t(this).parents("li:last"),a=t(window).width(),n=e.offset().left;e.width()+n>a&&e.css({left:"-100%","max-width":"100%"})})}function n(){i.find(" li.has-dropdown").each(function(){var e,a,n=jQuery(this),o=i.height(),s=i.find("nav > ul > li.has-dropdown > a"),l=0;if(l=s.length>1?jQuery(s.get(s.length-1)).outerHeight(!0)+20:s.outerHeight(!0)+20,!n.parents(".megamenu").length){if(jQuery(".top-classic").length)jQuery("header.top-classic .content").hasClass("style-wireframe")||jQuery(".top-classic nav > ul > li.has-dropdown > ul").css("top",l+(o-l)/2-10);else if(jQuery(".top-logotop").length){var r=jQuery("header.top-logotop .color-overlay").height(),d=jQuery(".logo-top-container").outerHeight(!0)+jQuery(".logo").outerHeight(!0)+5;d>r&&jQuery("header.top-logotop").css({height:d});var p=d>=r?0:(r-d)/2;l=jQuery("header .style-logotop nav > ul").height(),jQuery(".style-logotop  nav > ul > li.has-dropdown > ul").css("top",l+p-10)}n.on("mouseenter tap",function(i){"tap"==i.type&&i.stopPropagation(),clearTimeout(e),clearTimeout(a),e=setTimeout(function(){if((n.hasClass("megamenu")&&n.parents(".side").length||n.parents(".gather-overlay").length||n.parents(".top").length)&&(n.addClass("hippo-menu-hovered"),n.hasClass("hippo-menu-hovered")))if(n.parents(".left.side-classic").length){var e=jQuery("nav:not(.navigation-mobile) li.megamenu > ul > li");TweenMax.to(n.children("ul"),.4,{opacity:1,marginLeft:0,display:"block",ease:Expo.easeOut}),TweenMax.staggerTo(e,.9,{opacity:1,marginLeft:0,ease:Expo.easeOut,delay:0},.1)}else if(n.parents(".right.side-classic").length){var e=jQuery("nav:not(.navigation-mobile) li.megamenu > ul > li");TweenMax.to(n.children("ul"),.5,{opacity:"1",marginRight:0,display:"block",ease:Expo.easeOut}),TweenMax.staggerTo(e,.9,{opacity:1,marginRight:0,ease:Expo.easeOut,delay:0},.1)}else{var e,a,i=t("#layoutcontainer > .layout").width(),o=n.offset().left-t("#layoutcontainer > .layout > .wrap").offset().left;if(a=n.hasClass("megamenu")?n.find("> .dropdown").width():n.parent().hasClass("dropdown")?n.width()+n.find("> .dropdown").width():n.find("> .dropdown").width(),a+o>i&&n.hasClass("megamenu")){var s=0,l=n.width(),r=(i-a)/2,d=i-o,p=o+l;s=d>=a?0:p>=a?a-l:o-r,n.find("> .dropdown").css({left:-s})}(a+o>i&&!n.hasClass("megamenu")||n.parents(".open-right").length)&&(n.find("> .dropdown").css({left:"-104.3%"}),n.addClass("open-right")),n.hasClass("megamenu")?(e=n.find("> ul > li"),n.parents(".content").hasClass("style-wireframe")?TweenMax.to(n.children("ul"),.5,{opacity:"1",display:"block",marginTop:"3px",ease:Expo.easeOut}):TweenMax.to(n.children("ul"),.5,{opacity:"1",display:"block",marginTop:0,ease:Expo.easeOut}),TweenMax.staggerTo(e,.8,{opacity:1,marginTop:0,ease:Expo.easeOut,delay:0},.15)):n.parents(".content").hasClass("style-wireframe")?TweenMax.to(n.children("ul"),.5,{opacity:"1",display:"block",marginTop:"3px",ease:Expo.easeOut}):TweenMax.to(n.children("ul"),.5,{opacity:"1",display:"block",marginTop:0,ease:Expo.easeOut})}},300)}),n.on("mouseleave",function(t){clearTimeout(e),clearTimeout(a),a=setTimeout(function(){if((n.hasClass("megamenu")&&n.parents(".side").length||n.parents(".gather-overlay").length||n.parents(".top").length)&&(n.removeClass("hippo-menu-hovered"),!n.hasClass("hippo-menu-hovered")))if(n.parents(".left.side-classic").length){var e=jQuery("nav:not(.navigation-mobile) li.megamenu > ul > li");TweenMax.to(n.children("ul"),.3,{opacity:"0",display:"none",marginLeft:"-10px"}),TweenMax.set(e,{opacity:0,marginLeft:"-10px"})}else if(n.parents(".right.side-classic").length){var e=jQuery("nav:not(.navigation-mobile) li.megamenu > ul > li");TweenMax.to(n.children("ul"),.3,{opacity:"0",display:"none",marginRight:"-10px"}),TweenMax.set(e,{opacity:0,marginRight:"-10px"})}else{var e;n.hasClass("megamenu")?(e=n.find("> ul > li"),TweenMax.to(n.children("ul"),.2,{opacity:0,display:"none",marginTop:"-10px"}),TweenMax.to(e,0,{opacity:0,marginTop:"-15px",delay:0})):TweenMax.to(n.children("ul"),.2,{opacity:0,display:"none",marginTop:"-10px"})}},300)})}})}var t=jQuery,i=jQuery(this),o=jQuery(window);t(window).resize(a),a(),n()}}(jQuery);